"use strict";(self.webpackChunkvite_ml_platform=self.webpackChunkvite_ml_platform||[]).push([[805],{5117:function(e,n,o){o.d(n,{T:function(){return t},C:function(){return l}});var i=o(1899),t=function(){return(0,i.I0)()},l=i.v9},6805:function(e,n,o){o.r(n),o.d(n,{default:function(){return Ee}});var i=o(2791),t=o(9332),l=o(678),r=o(9093),a=o(8511),s=o(199),d=o(7291),c=o(927),u=o(1318),p=o(5853),x=o(5117),m=o(6097);function f(e,n){var o=null;return function(){for(var i=this,t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];clearTimeout(o),o=window.setTimeout((function(){return e.apply(i,l)}),n)}}var h=o(5918),g={modalStyles:(0,h.y0)({position:"fixed",width:"100%",height:"100vh",backgroundColor:"rgba(0, 0, 0, .5)",zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"}),cancelIcon:{iconName:"Cancel"},contentStyles:(0,h.ZC)({container:{minWidth:"75%",minHeight:"80%",overflow:"hidden",display:"flex",borderRadius:2,backgroundColor:"#fff",padding:"0 24px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0 14px 0"},body:{flex:1,height:0,position:"relative",display:"flex"},footer:{position:"relative",display:"flex",padding:"24px 0",justifyContent:"flex-end"}}),resizeLine:(0,h.y0)({width:8,height:"100%",cursor:"col-resize",background:"#eee",transition:"background 0.2s",margin:"0 15px 0 2px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}),resizeLineIconStyles:(0,h.y0)({display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",paddingRight:"19px",width:8,height:20,fontSize:20,pointerEvents:"none"})},v=o(184),y=function(){var e=(0,x.T)(),n=(0,x.C)(m.ld),o=(0,x.C)(m.PF),f=(0,i.useState)(""),h=(0,l.Z)(f,2),y=h[0],b=h[1],j=(0,i.useState)("100%"),w=(0,l.Z)(j,2),C=w[0],S=w[1],k=(0,i.useState)(!1),N=(0,l.Z)(k,2),_=N[0],L=N[1],I=(0,i.useState)(!1),D=(0,l.Z)(I,2),T=D[0],Z=D[1],O=function(){Z(!1),e((0,m.y7)(!1))},z=function(){L(!1)};return(0,i.useEffect)((function(){b(o)}),[n]),(0,v.jsx)("div",{className:g.modalStyles,style:{display:n?"flex":"none"},children:(0,v.jsxs)(t.K,{className:g.contentStyles.container,children:[(0,v.jsxs)("div",{className:g.contentStyles.header,children:[(0,v.jsx)("span",{children:"JSON Editor"}),(0,v.jsx)(r.h,{iconProps:g.cancelIcon,onClick:O})]}),(0,v.jsxs)("div",{className:g.contentStyles.body,onMouseMove:function(e){_&&e.clientX>370&&S(e.clientX-270)},onMouseUp:z,onMouseLeave:z,children:[(0,v.jsx)("div",{style:{height:"100%",width:C},children:(0,v.jsx)(p.ZP,{language:"json",theme:"vs",value:y,onChange:function(e){Z(!1),b(e)},height:500,options:{renderValidationDecorations:"on",automaticLayout:!0,formatOnPaste:!0,formatOnType:!0,renderLineHighlight:"none",autoClosingOvertype:"always",cursorStyle:"block",quickSuggestions:!1,scrollBeyondLastLine:!1,snippetSuggestions:"none",minimap:{enabled:!1}}})}),(0,v.jsx)("div",{className:g.resizeLine,onMouseDown:function(){L(!0)},children:(0,v.jsx)(a.J,{iconName:"BulletedListBulletMirrored",className:g.resizeLineIconStyles})}),(0,v.jsx)("div",{style:{flex:1}})]}),(0,v.jsxs)("div",{className:g.contentStyles.footer,children:[T?(0,v.jsx)(s.c,{messageBarType:d.f.error,styles:{root:{position:"absolute",width:"50%",left:0}},isMultiline:!1,children:"JSON \u683c\u5f0f\u9519\u8bef"}):null,(0,v.jsx)(c.K,{styles:{root:{marginRight:10}},onClick:function(){!function(e){try{return JSON.parse(e),!0}catch(n){return!1}}(y)?Z(!0):(e((0,m.sW)(y)),e((0,m.y7)(!1)))},children:"\u786e\u8ba4"}),(0,v.jsx)(u.a,{onClick:O,children:"\u53d6\u6d88"})]})]})})},b=o(8636),j=o(6222),w=o(2692),C=o(7708),S=o(110),k=o(7504),N=o(3997),_=o(4011),L=o(2081),I=o(5223),D=o(7217),T=o(8489),Z=o(2274),O=o(3860),z={settingContainer:(0,h.y0)({display:"flex",flexDirection:"column",width:350,position:"absolute",top:0,right:0,bottom:0,height:"auto",backgroundColor:"#fff",borderLeft:"1px solid rgb(234, 234, 234)",boxShadow:"rgb(0 0 0 / 18%) 0px 1.6px 3.6px 0px, rgb(0 0 0 / 22%) 0px 0.3px 0.9px 0px",zIndex:999}),settingHeader:(0,h.y0)({display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",color:"balck",boxSizing:"border-box",padding:"10px 20px"}),headerTitle:(0,h.y0)({fontSize:20,fontWeight:600,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:"black"}),settingContent:(0,h.y0)({flex:"1 1 0%",overflowY:"auto","&::-webkit-scrollbar":{width:4},"&::-webkit-scrollbar-thumb":{minHeight:"15px",border:"6px solid transparent",backgroundClip:"padding-box",backgroundColor:"rgb(200, 200, 200)"}}),contentWrapper:(0,h.y0)({padding:"0 20px 20px",overflowX:"hidden",wordBreak:"break-word",userSelect:"text",borderTop:"1px solid #eaeaea"}),splitLine:(0,h.y0)({margin:"10px -20px 0 -20px",borderTop:"1px solid #eaeaea"})},B=function(){var e=(0,x.T)(),n=(0,x.C)(b.H6),o=(0,x.C)(I.RU),t=(0,x.C)(b.mg),a=(0,x.C)(L.hr),s=(0,i.useState)({}),d=(0,l.Z)(s,2),c=d[0],u=d[1],p=(0,i.useState)([]),m=(0,l.Z)(p,2),f=m[0],h=m[1],g=(0,i.useState)(),y=(0,l.Z)(g,2),j=y[0],w=y[1],C=function(o,i){var l={};if(l[o]=i,"project"===o){var r=i;w(r),l[o]=r.key}n&&(u((0,T.Z)((0,T.Z)({},c),l)),e((0,b.v_)((0,T.Z)((0,T.Z)({},t),l))))};return(0,i.useEffect)((function(){if(n){var e,o;u(n);var i={key:null===n||void 0===n||null===(e=n.project)||void 0===e?void 0:e.id,text:null===n||void 0===n||null===(o=n.project)||void 0===o?void 0:o.name};w(i)}}),[n]),(0,i.useEffect)((function(){Object.keys(t).length>1&&e((0,b.u6)(!0))}),[t]),(0,i.useEffect)((function(){N.Z.project_modelview().then((function(e){var n=null===e||void 0===e?void 0:e.result.data.reduce((function(e,n){if("org"===n.type){var o={key:n.id,text:n.name};e.push(o)}return e}),[]);h(n)}))}),[]),(0,i.useEffect)((function(){var n={};a.forEach((function(e){if((0,k.un)(e)){var o,i=a.filter((function(n){return n.id===e.source}))[0],t=a.filter((function(n){return n.id===e.target}))[0];null!==(o=n["".concat(t.data.name)])&&void 0!==o&&o.upstream?n["".concat(t.data.name)].upstream.push("".concat(i.data.name)):(n["".concat(t.data.name)]={},n["".concat(t.data.name)].upstream=["".concat(i.data.name)])}}));var o=(0,T.Z)({},n);u((0,T.Z)((0,T.Z)({},c),{dag_json:JSON.stringify(o,void 0,4)})),e((0,b.v_)((0,T.Z)((0,T.Z)({},t),{dag_json:JSON.stringify(o)})))}),[a]),(0,v.jsxs)("div",{style:{visibility:o?"visible":"hidden"},className:z.settingContainer,children:[(0,v.jsxs)("div",{className:z.settingHeader,children:[(0,v.jsx)("div",{className:z.headerTitle,children:"\u6d41\u6c34\u7ebf\u8bbe\u7f6e"}),(0,v.jsx)(r.h,{iconProps:{iconName:"ChromeClose",styles:{root:{fontSize:12,color:"#000"}}},onClick:function(){e((0,I.ZN)())}})]}),(0,v.jsx)("div",{className:z.settingContent,children:(0,v.jsxs)("div",{className:z.contentWrapper,children:[(0,v.jsx)(Z.L,{label:"\u9879\u76ee\u7ec4",onChange:function(e,n){C("project",n||"")},selectedKey:j?j.key:void 0,placeholder:"Select an option",options:f}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u540d\u79f0",description:"\u82f1\u6587\u540d(\u5b57\u6bcd\u3001\u6570\u5b57\u3001- \u7ec4\u6210)\uff0c\u6700\u957f50\u4e2a\u5b57\u7b26",onChange:function(e,n){C("name",n||"")},value:(null===c||void 0===c?void 0:c.name)||"",disabled:!0}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u63cf\u8ff0",required:!0,onChange:function(e,n){C("describe",n||"")},value:(null===c||void 0===c?void 0:c.describe)||""}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u547d\u540d\u7a7a\u95f4",description:"\u90e8\u7f72task\u6240\u5728\u7684\u547d\u540d\u7a7a\u95f4(\u76ee\u524d\u65e0\u9700\u586b\u5199)",value:(null===c||void 0===c?void 0:c.namespace)||"",readOnly:!0,disabled:!0}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(Z.L,{label:"\u8c03\u5ea6\u7c7b\u578b",options:[{key:"once",text:"once"},{key:"crontab",text:"crontab"}],selectedKey:null===c||void 0===c?void 0:c.schedule_type,onChange:function(e,n){C("schedule_type","".concat(null===n||void 0===n?void 0:n.text)||"")}}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u8c03\u5ea6\u5468\u671f",description:"\u5468\u671f\u4efb\u52a1\u7684\u65f6\u95f4\u8bbe\u5b9a * * * * * \u8868\u793a\u4e3a minute hour day month week",onChange:function(e,n){C("cron_time",n||"")},value:(null===c||void 0===c?void 0:c.cron_time)||""}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u8c03\u5ea6\u673a\u5668",description:"\u90e8\u7f72task\u6240\u5728\u7684\u673a\u5668(\u76ee\u524d\u65e0\u9700\u586b\u5199)",onChange:function(e,n){C("node_selector",n||"")},value:(null===c||void 0===c?void 0:c.node_selector)||""}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(Z.L,{label:"\u955c\u50cf\u62c9\u53d6\u7b56\u7565",options:[{key:"Always",text:"Always"},{key:"IfNotPresent",text:"IfNotPresent"}],selectedKey:c.image_pull_policy,onChange:function(e,n){C("image_pull_policy","".concat(null===n||void 0===n?void 0:n.text)||"")}}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(Z.L,{label:"\u8fc7\u5f80\u4f9d\u8d56",options:[{key:"true",text:"\u662f",data:!0},{key:"false",text:"\u5426",data:!1}],selectedKey:"".concat(c.depends_on_past),onChange:function(e,n){C("depends_on_past",null===n||void 0===n?void 0:n.data)}}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u6700\u5927\u6fc0\u6d3b\u8fd0\u884c\u6570",description:"\u5f53\u524dpipeline\u53ef\u540c\u65f6\u8fd0\u884c\u7684\u4efb\u52a1\u6d41\u5b9e\u4f8b\u6570\u76ee",onChange:function(e,n){C("max_active_runs",n?+n:"")},value:(null===c||void 0===c?void 0:c.max_active_runs)||"",required:!0}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u4efb\u52a1\u5e76\u884c\u6570",description:"pipeline\u4e2d\u53ef\u540c\u65f6\u8fd0\u884c\u7684task\u6570\u76ee",onChange:function(e,n){C("parallelism",n?+n:"")},value:(null===c||void 0===c?void 0:c.parallelism)||"",required:!0}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u6d41\u5411\u56fe",onChange:function(e,n){C("dag_json",n||"{}")},value:(null===c||void 0===c?void 0:c.dag_json)||"{}",multiline:!0,autoAdjustHeight:!0,disabled:!0}),(0,v.jsx)("div",{className:z.splitLine}),(0,v.jsx)(O.n,{label:"\u5168\u5c40\u73af\u5883\u53d8\u91cf",description:"\u4e3a\u6bcf\u4e2atask\u90fd\u6dfb\u52a0\u7684\u516c\u5171\u53c2\u6570",onChange:function(e,n){C("global_env",n||"")},multiline:!0,autoAdjustHeight:!0,value:(null===c||void 0===c?void 0:c.global_env)||""})]})})]})},H=o(656),E=o(420),R=o(4794),W=o(3934),M={modelContainer:(0,h.y0)({display:"flex",flexDirection:"column",width:350,position:"absolute",top:0,right:0,bottom:0,height:"auto",backgroundColor:"#fff",borderLeft:"1px solid rgb(234, 234, 234)",boxShadow:"rgb(0 0 0 / 18%) 0px 1.6px 3.6px 0px, rgb(0 0 0 / 22%) 0px 0.3px 0.9px 0px",zIndex:998}),modelHeader:(0,h.y0)({display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",color:"balck",boxSizing:"border-box",padding:"10px 20px"}),headerTitle:(0,h.y0)({fontSize:20,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:"black",fontWeight:600}),modelContent:(0,h.y0)({flex:"1 1 0%",overflowY:"auto","&::-webkit-scrollbar":{width:4},"&::-webkit-scrollbar-thumb":{minHeight:"15px",border:"6px solid transparent",backgroundClip:"padding-box",backgroundColor:"rgb(200, 200, 200)"}}),contentWrapper:(0,h.y0)({padding:"0 20px 20px",overflowX:"hidden",wordBreak:"break-word",userSelect:"text",borderTop:"1px solid #eaeaea"}),splitLine:(0,h.y0)({margin:"10px -20px 0 -20px",borderTop:"1px solid #eaeaea"}),settingControl:(0,h.y0)({height:"auto",display:"flex",flexDirection:"column",paddingTop:20}),saveButton:(0,h.y0)({alignSelf:"center"}),debugButton:(0,h.y0)({display:"flex",flexDirection:"row",justifyContent:"space-evenly",paddingTop:20}),templateConfig:(0,h.y0)({color:"rgb(96, 94, 92)",fontSize:10,paddingTop:5,paddingLeft:2,"> a":{textDecoration:"none"}}),argsDescription:(0,h.y0)({color:"rgb(96, 94, 92)",fontSize:10,"> a":{textDecoration:"none"}}),textLabelStyle:(0,h.y0)({display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:600,color:"rgb(50, 49, 48)",boxSizing:"border-box",boxShadow:"none",margin:"0px",padding:"5px 0px",overflowWrap:"break-word",lineHeight:"30px"})},P=function(e){var n=(0,x.T)(),o=(0,x.C)(L.hr),t=(0,x.C)(D.Aj),r=(0,x.C)(m.ld),a=(0,x.C)(m.OA),s=(0,x.C)(m.PF),d=(0,i.useState)({}),c=(0,l.Z)(d,2),u=c[0],p=c[1],f=(0,i.useState)({}),h=(0,l.Z)(f,2),g=h[0],y=h[1],b=(0,i.useState)({}),j=(0,l.Z)(b,2),w=j[0],C=j[1],S=(0,i.useState)({}),k=(0,l.Z)(S,2),I=k[0],z=k[1],B=(0,i.useState)({}),H=(0,l.Z)(B,2),P=H[0],J=H[1],K=[{key:"debug",text:"debug",onClick:function(){return A("debug")},iconProps:{iconName:"Bug"}},{key:"run",text:"run",onClick:function(){return A("run")},iconProps:{iconName:"Play"}},{key:"log",text:"log",onClick:function(){return A("log")},iconProps:{iconName:"TimeEntry"}},{key:"clear",text:"clear",onClick:function(){return A("clear")},iconProps:{iconName:"Unsubscribe"}}],A=function(n){e.model.id&&window.open("".concat(window.location.origin,"/task_modelview/").concat(n,"/").concat(e.model.id))},F=function(e,n,o){var i={},t=null;switch(o){case"json":try{t=JSON.parse("".concat(n))}catch(r){t=n}break;case"int":t=+n;break;default:t=n}if(o){var l=JSON.parse(JSON.stringify(P));l[e]=t,i.args=JSON.stringify(l)}else i[e]=n;y((0,T.Z)((0,T.Z)({},g),i)),p((0,T.Z)((0,T.Z)({},u),i)),null!==i&&void 0!==i&&i.args&&J((0,T.Z)((0,T.Z)({},P),JSON.parse(i.args)))};return(0,i.useEffect)((function(){e.model.selected&&(n((0,D.kQ)(+e.model.id)),0===Object.keys(u).length&&N.Z.task_modelview_get(+e.model.id).then((function(e){if(0===e.status){var n=JSON.parse(e.result.args),o=e.result.job_template,i=null!==o&&void 0!==o&&o.args?JSON.parse(o.args):{},t=Object.keys(i).reduce((function(e,n){var o=i[n];return Object.keys(o).forEach((function(n){e[n]=o[n].default})),e}),{});p(e.result),J(Object.assign(t,n)),z(i),C(o)}})).catch((function(e){e.response&&n((0,_.L$)({msg:e.response.data.message}))})))}),[e.model.selected]),(0,i.useEffect)((function(){if(e.model.id&&n((0,D.hs)({id:+e.model.id,changed:g})),null!==g&&void 0!==g&&g.label){var i=o.map((function(n){if(n.id===e.model.id){var o=(0,T.Z)((0,T.Z)({},n.data),{label:g.label});return(0,T.Z)((0,T.Z)({},n),{data:o})}return n}));n((0,L.OV)(i))}}),[g]),(0,i.useEffect)((function(){Object.keys(I).length>0&&+e.model.id===t&&!r&&F(a,s,"json")}),[s]),(0,v.jsxs)("div",{className:M.modelContainer,style:{visibility:e.model.selected?"visible":"hidden"},children:[(0,v.jsx)("div",{className:M.modelHeader,children:(0,v.jsx)("div",{className:M.headerTitle,children:(null===u||void 0===u?void 0:u.name)||""})}),(0,v.jsx)("div",{className:M.modelContent,children:(0,v.jsxs)("div",{className:M.contentWrapper,children:[(0,v.jsx)(E.X,{items:K,overflowItems:[],styles:{root:{padding:0}}}),(0,v.jsx)(O.n,{label:"\u4efb\u52a1\u6a21\u677f",value:(null===w||void 0===w?void 0:w.name)||"",disabled:!0,readOnly:!0,onRenderDescription:function(){var e="";try{var n;if(w.expand)e=(null===(n=JSON.parse(w.expand))||void 0===n?void 0:n.help_url)||""}catch(o){console.error(o)}return(0,v.jsx)("div",{className:M.templateConfig,children:e?(0,v.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:"\u914d\u7f6e\u6587\u6863"}):null})}}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"\u6a21\u677f\u63cf\u8ff0",value:(null===w||void 0===w?void 0:w.describe)||"",disabled:!0,readOnly:!0}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"\u540d\u79f0",onChange:function(e,n){F("name",n||"")},value:(null===u||void 0===u?void 0:u.name)||"",disabled:!0}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"\u6807\u7b7e",description:"\u8282\u70b9\u6807\u7b7e",required:!0,onChange:function(e,n){F("label",n||"")},value:(null===u||void 0===u?void 0:u.label)||""}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"\u5185\u5b58\u7533\u8bf7",description:"\u5185\u5b58\u7684\u8d44\u6e90\u4f7f\u7528\u9650\u5236\uff0c\u793a\u4f8b1G\uff0c10G\uff0c \u6700\u5927100G\uff0c\u5982\u9700\u66f4\u591a\u8054\u7cfb\u7ba1\u7406\u5458",onChange:function(e,n){F("resource_memory",n||"")},value:(null===u||void 0===u?void 0:u.resource_memory)||"",required:!0}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"CPU\u7533\u8bf7",description:"CPU\u7684\u8d44\u6e90\u4f7f\u7528\u9650\u5236(\u5355\u4f4d\u6838)\uff0c\u793a\u4f8b 0.4\uff0c10\uff0c\u6700\u592750\u6838\uff0c\u5982\u9700\u66f4\u591a\u8054\u7cfb\u7ba1\u7406\u5458",onChange:function(e,n){F("resource_cpu",n||"")},value:(null===u||void 0===u?void 0:u.resource_cpu)||"",required:!0}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"GPU\u7533\u8bf7",description:"gpu\u7684\u8d44\u6e90\u4f7f\u7528\u9650\u5236(\u5355\u4f4d\u5361)\uff0c\u793a\u4f8b:1\uff0c2\uff0c\u8bad\u7ec3\u4efb\u52a1\u6bcf\u4e2a\u5bb9\u5668\u72ec\u5360\u6574\u5361\u3002\u7533\u8bf7\u5177\u4f53\u7684\u5361\u578b\u53f7\uff0c\u53ef\u4ee5\u7c7b\u4f3c 1(V100),\u76ee\u524d\u652f\u6301T4/V100/A100/VGPU",onChange:function(e,n){F("resource_gpu",n||"")},value:(null===u||void 0===u?void 0:u.resource_gpu)||""}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"\u8d85\u65f6\u4e2d\u65ad",description:"task\u8fd0\u884c\u65f6\u957f\u9650\u5236\uff0c\u4e3a0\u8868\u793a\u4e0d\u9650\u5236(\u5355\u4f4ds)",onChange:function(e,n){F("timeout",n||"")},value:(null===u||void 0===u?void 0:u.timeout)||0}),(0,v.jsx)("div",{className:M.splitLine}),(0,v.jsx)(O.n,{label:"\u91cd\u8bd5\u6b21\u6570",description:"task\u91cd\u8bd5\u6b21\u6570",onChange:function(e,n){F("retry",n||"")},value:(null===u||void 0===u?void 0:u.retry)||0}),(0,v.jsx)("div",{className:M.splitLine}),Object.keys(I).reduce((function(e,o){var t=I[o],l=Object.keys(t).map((function(e){var o=t[e],l=o.choice.map((function(e){return{key:e,text:e}})),r=P&&P[e],a="json"===o.type?JSON.stringify(r,void 0,4):r;return(0,v.jsx)(i.Fragment,{children:l.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Z.L,{label:"".concat(e),onChange:function(n,i){F(e,"".concat(null===i||void 0===i?void 0:i.text)||"",o.type)},defaultSelectedKey:a||o.default,options:l,required:1===o.require,disabled:1!==o.editable}),(0,v.jsx)("div",{className:M.argsDescription,dangerouslySetInnerHTML:{__html:o.describe}})]}):(0,v.jsx)(O.n,{onRenderLabel:function(){return(0,v.jsxs)("div",{className:M.textLabelStyle,children:["".concat(e),"json"===o.type?(0,v.jsx)(R.K,{iconProps:{iconName:"FullWidthEdit"},onClick:function(){n((0,m.vh)({key:e,value:a})),n((0,m.y7)(!0))},children:"\u7f16\u8f91"}):null]})},onRenderDescription:function(){return(0,v.jsx)("div",{className:M.argsDescription,dangerouslySetInnerHTML:{__html:o.describe}})},multiline:"json"===o.type,autoAdjustHeight:"json"===o.type,onChange:function(n,i){F(e,i||"",o.type)},value:a,required:1===o.require,disabled:1!==o.editable||"json"===o.type})},e)}));return e.push((0,v.jsxs)(i.Fragment,{children:[(0,v.jsxs)(W._,{children:["\u53c2\u6570 ",o]}),l.flat(),(0,v.jsx)("div",{className:M.splitLine})]},o)),e}),[])]})})]})},J={height:54,minWidth:272,borderRadius:100,borderStyle:"solid",display:"flex",flexDirection:"row",backgroundColor:"#fff",fontSize:12,cursor:"move",boxSizing:"border-box",transition:"all 0.3s"},K=(0,h.y0)((0,T.Z)((0,T.Z)({},J),{borderWidth:1,borderColor:"#b1b1b7"})),A=(0,h.y0)((0,T.Z)((0,T.Z)({},J),{borderWidth:1,borderColor:"#006dce",backgroundColor:"#f1f7fd"})),F=(0,h.y0)({width:8,flexShrink:0,borderRadius:"3px 0 0 3px",borderRight:"1px solid #8a8886",margin:"-8px 0 -8px -8px"}),G=(0,h.y0)({boxSizing:"border-box",display:"flex",flexDirection:"column",overflow:"hidden"}),U=(0,h.y0)({display:"flex",marginLeft:7,minHeight:26}),V=(0,h.y0)({fontSize:16,width:64,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(0, 120, 212)",borderTopLeftRadius:100,borderBottomLeftRadius:100,margin:"-1px 0 -1px -1px"}),X=(0,h.y0)({userSelect:"none",boxSizing:"border-box",color:"#fff",fontSize:20,marginLeft:8}),$=(0,h.y0)({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingLeft:8,paddingBottom:2,marginBottom:2,fontWeight:600,fontSize:14,borderBottom:"1px dashed #c1c1c1",userSelect:"none"}),q=(0,h.y0)({width:"12px !important",height:"12px !important",bottom:"-7px !important",borderColor:"#b1b1b7 !important",backgroundColor:"#fff !important",transition:"all 0.3s","&:hover":{borderWidth:"2px !important",borderColor:"var(--hover-color) !important",cursor:"pointer !important"}}),Y=(0,h.y0)({visibility:"hidden"}),Q=(0,h.y0)({height:"100%",width:"100%",display:"flex",justifyContent:"center",flexDirection:"column"}),ee={nodeTips:(0,h.y0)({color:"rgb(177, 177, 183)",paddingLeft:8}),nodeContentWrapper:Q,nodeContainer:K,nodeOnSelect:A,nodeBar:F,nodeContent:G,nodeConentTitleBar:U,nodeIconWrapper:V,nodeIcon:X,nodeTitle:$,handleStyle:q,hidden:Y},ne={dataSet:function(e){var n,o,i,t,l,r,s,d,c,u,p,x;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k.HH,{type:"target",position:k.Ly.Top,className:ee.handleStyle}),(0,v.jsxs)("div",{className:e.selected?ee.nodeOnSelect:ee.nodeContainer,style:{borderColor:e.selected?null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.info)||void 0===o||null===(i=o.color)||void 0===i?void 0:i.color:"",backgroundColor:e.selected?null===e||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.info)||void 0===l||null===(r=l.color)||void 0===r?void 0:r.bg:""},children:[(0,v.jsx)("div",{className:ee.nodeIconWrapper,style:{backgroundColor:null===e||void 0===e||null===(s=e.data)||void 0===s||null===(d=s.info)||void 0===d||null===(c=d.color)||void 0===c?void 0:c.color},children:(0,v.jsx)(a.J,{iconName:"Database",className:ee.nodeIcon})}),(0,v.jsxs)("div",{className:ee.nodeContentWrapper,children:[(0,v.jsx)("div",{className:ee.nodeTitle,children:null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.label}),null!==e&&void 0!==e&&null!==(p=e.data)&&void 0!==p&&p.info?(0,v.jsx)("div",{className:ee.nodeTips,children:null===e||void 0===e||null===(x=e.data)||void 0===x?void 0:x.info.describe}):null]})]}),(0,v.jsx)(k.HH,{type:"source",position:k.Ly.Bottom,className:ee.handleStyle}),(0,v.jsx)(H.m,{hostId:"hostId_model",className:"data-set-layer",children:(0,v.jsx)(P,{model:e})})]})}},oe={itemStyles:(0,h.y0)({position:"relative"}),flowWrapper:(0,h.y0)({width:"100%",height:"100%"}),spinnerWrapper:(0,h.y0)({position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.6)",zIndex:9999})},ie=t.K.Item,te=function(){var e=(0,x.T)(),n=(0,x.C)(L.hr),o=(0,x.C)(b.Bn),t=(0,x.C)(b.H6),r=(0,x.C)(I.RU),a=(0,x.C)(D.NH),s=(0,i.useRef)(null),d=(0,i.useState)(null),c=(0,l.Z)(d,2),u=c[0],p=c[1];return(0,i.useEffect)((function(){var n=JSON.parse((null===t||void 0===t?void 0:t.expand)||"[]").map((function(e){return!(0,k.un)(e)||null!==e&&void 0!==e&&e.arrowHeadType?((0,k.UG)(e)&&!e.data.label&&(e.data.label=e.data.name),e):Object.assign(e,{arrowHeadType:"arrow"})}));e((0,L.OV)(n))}),[t]),(0,v.jsx)(ie,{shrink:!0,grow:1,className:oe.itemStyles,children:(0,v.jsxs)("div",{className:oe.flowWrapper,ref:s,children:[(0,v.jsxs)(k.ZP,{elements:n,nodeTypes:ne,snapToGrid:!0,snapGrid:[16,16],defaultZoom:1,onLoad:function(e){p(e)},onDrop:function(i){i.preventDefault();var t=s.current.getBoundingClientRect(),l=JSON.parse(i.dataTransfer.getData("application/reactflow")),r=u.project({x:i.clientX-t.left,y:i.clientY-t.top}),a=l.args,d={};if(Object.keys(a).reduce((function(e,n){var o={};return Object.keys(a[n]).reduce((function(e,o){var i=a[n][o].default;return Object.assign(e,(0,j.Z)({},o,i)),e}),o),Object.assign(e,o),e}),d),o){e((0,D.Xt)(!0));var c="".concat(l.name.replace(/\.|[\u4e00-\u9fa5]/g,"").replace(/_|\s/g,"-")||"task","-").concat(Date.now()).substring(0,49);N.Z.task_modelview_add(o,{job_template:l.id,pipeline:+o,name:c,label:"\u65b0\u5efa ".concat(l.name," \u4efb\u52a1"),volume_mount:"kubeflow-user-workspace(pvc):/mnt,kubeflow-archives(pvc):/archives",image_pull_policy:"Always",working_dir:"",command:"",overwrite_entrypoint:0,node_selector:"cpu=true,train=true",resource_memory:"2G",resource_cpu:"2",resource_gpu:"0",timeout:0,retry:0,args:JSON.stringify(d)}).then((function(o){var i;if(null!==o&&void 0!==o&&null!==(i=o.result)&&void 0!==i&&i.id){var t={id:"".concat(o.result.id),type:"dataSet",position:r,data:{info:l,name:c,label:"\u65b0\u5efa ".concat(l.name," \u4efb\u52a1")}};e((0,b.u6)(!0)),e((0,L.OV)(n.concat(t))),setTimeout((function(){e((0,b.oL)())}),2e3)}})).catch((function(n){n.response&&e((0,_.L$)({msg:n.response.data.message}))})).finally((function(){e((0,D.Xt)(!1))}))}},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onElementClick:function(n,o){r&&o.data&&e((0,I.ZN)())},onElementsRemove:function(o){o.forEach((function(n){null!==n&&void 0!==n&&n.id&&(0,k.UG)(n)&&N.Z.task_modelview_del(+n.id).then((function(){setTimeout((function(){e((0,b.oL)())}),2e3)})).catch((function(n){n.response&&e((0,_.L$)({msg:n.response.data.message}))}))})),e((0,b.u6)(!0)),e((0,L.OV)((0,k.d0)(o,n)))},onConnect:function(o){e((0,b.u6)(!0)),e((0,L.OV)((0,k.Z_)(Object.assign(o,{arrowHeadType:"arrow"}),n)))},onNodeDragStop:function(o,i){e((0,L.OV)(n.map((function(e){return(null===e||void 0===e?void 0:e.id)===(null===i||void 0===i?void 0:i.id)?i:e})))),e((0,b.u6)(!0))},onSelectionChange:function(n){n&&e((0,L.pM)(n))},children:[(0,v.jsx)(B,{}),(0,v.jsx)(k.a9,{nodeStrokeColor:"#8a8886",nodeColor:"#c8c8c8"}),(0,v.jsx)(k.ZX,{}),(0,v.jsx)(w.Z,{id:"hostId_model",className:"layer-host"})]}),(0,v.jsx)("div",{className:oe.spinnerWrapper,style:{visibility:a?"visible":"hidden"},children:(0,v.jsx)(C.$,{size:S.E.large,label:"Loading"})})]})})},le=o(3032),re=o(4322),ae=o.n(re),se=o(9161),de=function(){var e=(0,x.T)(),n=(0,x.C)(_.V0);return(0,i.useEffect)((function(){n&&setTimeout((function(){e((0,_.L$)(null))}),3e3)}),[n]),n&&(0,v.jsx)(s.c,{messageBarType:d.f.error,styles:{root:{minHeight:32,width:"80%",margin:"0 auto"}},dismissButtonAriaLabel:"Close",onDismiss:function(){e((0,_.L$)(null))},isMultiline:!1,children:(null===n||void 0===n?void 0:n.msg)||""})},ce={headStyle:{root:{backgroundColor:"#fff",padding:"10px 16px",borderBottom:"1px solid #dadada"}},headNameStyle:(0,h.y0)({boxSizing:"border-box",marginLeft:"8px",padding:"0 8px",height:"32px",lineHeight:"32px",cursor:"text",marginBottom:"4px",fontSize:"16px",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"black"}),buttonItemStyle:{root:{marginRight:"16px"}},hidden:(0,h.y0)({visibility:"hidden"})},ue=t.K.Item,pe=function(){var e=(0,x.T)(),n=(0,x.C)(b.Bn),o=(0,x.C)(b.H6),i=(0,x.C)(_.zr),l=function(){var o=(0,le.Z)(ae().mark((function o(){return ae().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!n){o.next=9;break}return o.t0=e,o.next=4,(0,D.C)();case 4:return o.t1=o.sent,o.next=7,(0,o.t0)(o.t1);case 7:e((0,b.oL)()),window.open("".concat(window.location.origin,"/pipeline_modelview/run_pipeline/").concat(n));case 9:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();return(0,v.jsx)(ue,{className:"editor-head",children:(0,v.jsxs)(t.K,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center",styles:ce.headStyle,children:[(0,v.jsx)(ue,{grow:1,children:(0,v.jsxs)(t.K,{horizontal:!0,children:[(0,v.jsx)(ue,{children:o.name?(0,v.jsx)("div",{className:ce.headNameStyle,children:o.describe}):(0,v.jsx)(c.K,{styles:{root:{padding:"17px 16px"}},iconProps:{iconName:"Add",styles:{root:{fontSize:10}}},onClick:function(){N.Z.pipeline_modelview_add({describe:"\u65b0\u5efa\u6d41\u6c34\u7ebf-".concat(Date.now()),name:"".concat(i,"-pipeline-").concat(Date.now()),node_selector:"cpu=true,train=true",schedule_type:"once",image_pull_policy:"Always",parallelism:1,project:7}).then((function(e){var n;0===(null===e||void 0===e?void 0:e.status)&&"success"===(null===e||void 0===e?void 0:e.message)&&(window.location.search="?pipeline_id=".concat(null===e||void 0===e||null===(n=e.result)||void 0===n?void 0:n.id))})).catch((function(n){n.response&&e((0,_.L$)({msg:n.response.data.message}))}))},children:"\u65b0\u5efa\u6d41\u6c34\u7ebf"})}),(0,v.jsx)(ue,{className:o.name?"":ce.hidden,children:(0,v.jsx)(se.G,{content:"\u8bbe\u7f6e",children:(0,v.jsx)(r.h,{iconProps:{iconName:"Settings"},onClick:function(){e((0,I.ZN)())}})})}),(0,v.jsx)(ue,{grow:1,align:"center",children:(0,v.jsx)(de,{})})]})}),(0,v.jsx)(ue,{className:o.name?"":ce.hidden,children:(0,v.jsxs)(t.K,{horizontal:!0,children:[(0,v.jsx)(ue,{styles:ce.buttonItemStyle,children:(0,v.jsx)(c.K,{onClick:l,children:"\u8fd0\u884c"})}),(0,v.jsx)(ue,{styles:ce.buttonItemStyle,children:(0,v.jsx)(u.a,{onClick:function(){N.Z.pipeline_modelview_copy(n).then((function(e){null!==e&&void 0!==e&&e.id&&(window.self===window.top?window.location.search="?pipeline_id=".concat(e.id):window.parent.postMessage({type:"copy",message:{pipelineId:e.id}},"".concat(window.location.origin)))})).catch((function(n){n.response&&e((0,_.L$)({msg:n.response.data.message}))}))},children:"\u590d\u5236"})})]})})]})})},xe=o(1244),me={editorToolStyle:{root:{display:"flex",flexDirection:"row",backgroundColor:"#fff",padding:"2px 0px",borderBottom:"1px solid #dadada","#authoring-page-toolbar":{flex:1}}},autoSavedTips:(0,h.y0)({paddingRight:20,lineHeight:"1"}),commandBarStyle:{root:{height:"40px",padding:"0px 14px 0px 8px",borderBottom:"none",backgroundColor:"#fff"}},commonButton:{root:{width:"40px",height:"40px",borderRadius:"2px",minWidth:"40px"}},commonIcon:{root:{color:"#015cda",fontSize:18}},toggleStyle:{root:{display:"flex",alignItems:"center",padding:"8px 0px 8px 8px",height:"100%",boxSizing:"border-box",borderLeft:"1px solid rgb(234, 234, 234)",marginLeft:"8px"},container:{display:"inline-flex"}},comboBoxStyle:{container:{borderLeft:"1px solid #eaeaea",marginLeft:"4px",padding:"0px 5px 0px 10px",width:"auto"},root:{backgroundColor:"#ffffff",padding:"0px 20px 0px 4px",selectors:{"&.is-open::after":{borderBottom:"2px solid #015cda"},"&::after":{border:"none",borderBottom:0,borderRadius:"none"},".ms-Button":{width:20},".ms-Icon":{fontSize:8}}},input:{width:35,backgroundColor:"#ffffff"}}},fe=t.K.Item,he=function(){var e=(0,x.T)(),n=(0,x.C)(L.hr),o=(0,x.C)(b.N1),l=(0,x.C)(b.H6),r=(0,x.C)(b.Bn),s=(0,x.C)(D.BX),d=(0,x.C)(b.B5),c=(0,x.C)(L.tT),u=[{key:"expand",iconProps:{iconName:"Library",styles:me.commonIcon},text:"\u5c55\u5f00/\u5173\u95ed\u83dc\u5355",onClick:function(n){null===n||void 0===n||n.preventDefault(),e((0,xe.ZN)())}},{key:"save",iconProps:{iconName:"save",styles:me.commonIcon},text:"\u4fdd\u5b58",onClick:function(){var n=(0,le.Z)(ae().mark((function n(o){return ae().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null===o||void 0===o||o.preventDefault(),n.t0=e,n.next=4,(0,D.C)();case 4:n.t1=n.sent,(0,n.t0)(n.t1),e((0,b.oL)());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},{key:"example",iconProps:{iconName:"FastForward",styles:me.commonIcon},text:"\u8c03\u5ea6\u5b9e\u4f8b",onClick:function(){r&&window.open("".concat(window.location.origin,"/workflow_modelview/list/?_flt_2_labels=%22pipeline-id%22%3A+%22").concat(r,"%22"))}},{key:"log",iconProps:{iconName:"ComplianceAudit",styles:me.commonIcon},text:"\u65e5\u5fd7",onClick:function(){null!==l&&void 0!==l&&l.id&&window.open("".concat(window.location.origin,"/pipeline_modelview/web/log/").concat(r))}},{key:"docker",iconProps:{iconName:"WebAppBuilderFragment",styles:me.commonIcon},text:"\u5bb9\u5668",onClick:function(){null!==l&&void 0!==l&&l.name&&window.open("".concat(window.location.origin,"/pipeline_modelview/web/pod/").concat(r))}},{key:"timer",iconProps:{iconName:"TimeEntry",styles:me.commonIcon},text:"\u5b9a\u65f6\u8bb0\u5f55",onClick:function(){null!==l&&void 0!==l&&l.name&&window.open("".concat(window.location.origin,"/runhistory_modelview/list/?_flt_0_pipeline=").concat(r))}},{key:"delete",iconProps:{iconName:"Delete",styles:me.commonIcon},text:"\u5220\u9664\u8282\u70b9",onClick:function(){if((0,k.UG)(c[0])){var o,i=+(null===(o=c[0])||void 0===o?void 0:o.id);N.Z.task_modelview_del(i).then((function(){setTimeout((function(){e((0,b.oL)())}),2e3)})).catch((function(n){n.response&&e((0,_.L$)({msg:n.response.data.message}))}))}e((0,b.u6)(!0)),e((0,L.OV)((0,k.d0)(c,n)))}},{key:"monitor",iconProps:{iconName:"NetworkTower",styles:me.commonIcon},text:"\u76d1\u63a7",onClick:function(){null!==l&&void 0!==l&&l.id&&window.open("".concat(window.location.origin,"/pipeline_modelview/web/monitoring/").concat(r))}}];return(0,i.useEffect)((function(){s&&s.forEach((function(n){Object.keys(n).length>0&&e((0,b.u6)(!0))}))}),[s]),(0,v.jsxs)(fe,{shrink:!0,styles:me.editorToolStyle,children:[(0,v.jsx)(E.X,{id:"authoring-page-toolbar",styles:me.commandBarStyle,items:u}),(0,v.jsx)(t.K,{horizontal:!0,verticalAlign:"center",className:me.autoSavedTips,style:{visibility:r?"visible":"hidden"},children:o?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.J,{iconName:d?"AlertSolid":"SkypeCircleCheck",styles:{root:{color:d?"#e95f39":"#8cb93c",marginRight:5}}}),d?"\u672a\u4fdd\u5b58":"\u5df2\u4fdd\u5b58"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(C.$,{styles:{root:{marginRight:5}},size:S.E.small}),"\u4fdd\u5b58\u4e2d"]})})]})},ge=t.K.Item,ve=function(){var e=(0,x.T)();return(0,i.useEffect)((function(){e((0,b.e4)())}),[]),(0,v.jsx)(ge,{className:"flow-editor",styles:{root:{flexGrow:1,flexShrink:1,background:"#f4f4f4",overflow:"hidden",display:"flex",flexDirection:"column"}},children:(0,v.jsxs)(t.K,{grow:1,children:[(0,v.jsx)(pe,{}),(0,v.jsx)(he,{}),(0,v.jsx)(te,{})]})})},ye=o(4039),be=o(2972),je=o(4026),we=o(4390),Ce={get:function(e){var n=window.localStorage.getItem(e);return n&&n.match(/^(\{|\[).*(?=[}\]])/)?JSON.parse(n):n||""},set:function(e,n){window.localStorage.setItem(e,"string"===typeof n?n:JSON.stringify(n))}},Se={calloutContent:(0,h.y0)({display:"flex",flexFlow:"column nowrap",width:"360px",height:"auto",boxSizing:"border-box",maxHeight:"inherit",padding:"16px 0px",fontSize:"12px",background:"#fff",borderRadius:"2px"}),moduleDetailItemStyle:(0,h.y0)({fontSize:"12px",padding:"0 16px",overflowX:"visible",overflowY:"hidden"}),moduleDetailTitle:(0,h.y0)({padding:"0px 16px",fontWeight:600,fontSize:"14px",lineHeight:"1",marginTop:"0px",marginBottom:"8px"}),moduleDetailLabel:(0,h.y0)({fontSize:"12px",fontWeight:"bold",lineHeight:"16px",color:"rgb(89, 89, 89)",padding:"0px",margin:"0px 0px 4px"}),moduleDetailBody:(0,h.y0)({lineHeight:"14px",marginBottom:"22px",p:{margin:"0",padding:"0"}}),moduleButton:(0,h.y0)({display:"flex",justifyContent:"center",alignItems:"center"})},ke=t.K.Item,Ne=function(){var e,n=(0,x.T)(),o=(0,x.C)(xe.p),i=(0,x.C)(xe.b2),l=(0,x.C)(xe.H6),r=function(e){n((0,xe.DH)("mouseenter"!==e.type))};return(0,v.jsx)(be.U,{gapSpace:-10,hidden:o,hideOverflow:!0,calloutMaxHeight:480,isBeakVisible:!1,preventDismissOnLostFocus:!0,target:{current:i},directionalHint:12,children:(0,v.jsxs)(t.K,{className:Se.calloutContent,onMouseEnter:r,onMouseLeave:r,children:[(0,v.jsx)(ke,{children:(0,v.jsx)("h3",{className:Se.moduleDetailTitle,children:l.name})}),(0,v.jsx)(ke,{grow:1,shrink:1,className:Se.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(W._,{title:"Description",className:Se.moduleDetailLabel,children:"\u63cf\u8ff0"}),(0,v.jsx)("div",{className:Se.moduleDetailBody,children:(0,v.jsx)("p",{children:l.describe})})]})}),(0,v.jsx)(ke,{grow:1,shrink:1,className:Se.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(W._,{title:"Description",className:Se.moduleDetailLabel,children:"\u521b\u5efa\u4eba"}),(0,v.jsx)("div",{className:Se.moduleDetailBody,children:(0,v.jsx)("p",{children:l.createdBy})})]})}),(0,v.jsx)(ke,{grow:1,shrink:1,className:Se.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(W._,{title:"Description",className:Se.moduleDetailLabel,children:"\u955c\u50cf"}),(0,v.jsx)("div",{className:Se.moduleDetailBody,children:(0,v.jsx)("p",{children:l.imagesName})})]})}),(0,v.jsx)(ke,{grow:1,shrink:1,className:Se.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(W._,{title:"Description",className:Se.moduleDetailLabel,children:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),(0,v.jsx)("div",{className:Se.moduleDetailBody,children:(0,v.jsx)("p",{children:l.lastChanged})})]})}),(0,v.jsx)(ke,{grow:1,shrink:1,className:Se.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(W._,{title:"Description",className:Se.moduleDetailLabel,children:"\u7248\u672c"}),(0,v.jsx)("div",{className:Se.moduleDetailBody,children:(0,v.jsx)("p",{children:l.version})})]})}),null!==l&&void 0!==l&&null!==(e=l.expand)&&void 0!==e&&e.help_url?(0,v.jsx)(ke,{grow:1,shrink:1,className:Se.moduleButton,children:(0,v.jsx)(c.K,{onClick:function(){window.open(l.expand.help_url)},children:"\u914d\u7f6e\u6587\u6863"})}):null]})})},_e={moduleItem:(0,h.y0)({width:"100%",userSelect:"none",cursor:"pointer"}),moduleListModuleCard:(0,h.y0)({margin:"8px 16px",border:"1px solid rgb(234, 234, 234)",background:"rgb(248, 248, 248)",color:"rgb(55, 55, 55)",borderRadius:"2px",padding:"8px",display:"flex",fontSize:"12px",flexDirection:"column","&:hover":{backgroundColor:"#eee"},"> div":{pointerEvents:"none",display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center","> header":{flexGrow:1,color:"rgb(0, 0, 0)",fontWeight:600,fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",lineHeight:"16px"},"> summary":{flexGrow:1,color:"rgb(55, 55, 55)",fontSize:"12px"}}})},Le=function(e){var n=(0,x.T)(),o=(0,i.useState)(e.model),t=(0,l.Z)(o,2),r=t[0],s=t[1],d=function(e){"mouseenter"===e.type&&n((0,xe.VF)(e.target)),n((0,xe.DH)("mouseenter"!==e.type)),n((0,xe.rn)(r))};return(0,i.useEffect)((function(){s(e.model)}),[e.model]),(0,v.jsx)("div",{className:_e.moduleItem,children:(0,v.jsx)("div",{className:"module-card-with-hover-wrap",children:(0,v.jsx)("div",{className:"module-card-content-wrap",children:(0,v.jsxs)("div",{className:_e.moduleListModuleCard,onMouseEnter:d,onMouseLeave:d,onMouseDown:function(){n((0,xe.DH)(!0))},onDragStart:function(e){e.dataTransfer.setData("application/reactflow",JSON.stringify(r)),e.dataTransfer.effectAllowed="move"},draggable:!0,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(a.J,{iconName:"Database",styles:{root:{marginRight:"4px",lineHeight:"16px"}}}),(0,v.jsx)("header",{children:r.name})]}),(0,v.jsx)("div",{children:(0,v.jsx)("summary",{children:(0,v.jsx)("span",{children:r.describe})})})]})})})})},Ie={moduleItem:(0,h.y0)({width:"100%",userSelect:"none",cursor:"pointer"}),moduleListModuleCard:(0,h.y0)({margin:"4px 8px",border:"1px solid rgb(234, 234, 234)",background:"rgb(248, 248, 248)",color:"rgb(55, 55, 55)",borderRadius:"2px",padding:"5px 8px",display:"flex",fontSize:"12px",flexDirection:"column","&:hover":{backgroundColor:"#eee"},"> div":{pointerEvents:"none",display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center","> header":{flexGrow:1,color:"rgb(0, 0, 0)",fontWeight:600,fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",lineHeight:"16px"},"> summary":{flexGrow:1,color:"rgb(55, 55, 55)",fontSize:"12px"}}})},De=function(e){var n=(0,i.useState)(e.model),o=(0,l.Z)(n,2),t=o[0],r=o[1];return(0,i.useEffect)((function(){r(e.model)}),[e.model]),(0,v.jsx)("div",{className:Ie.moduleItem,children:(0,v.jsx)("div",{className:"module-card-with-hover-wrap",children:(0,v.jsx)("div",{className:"module-card-content-wrap",children:(0,v.jsxs)("div",{className:Ie.moduleListModuleCard,onClick:e.onClick,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(a.J,{iconName:"Database",styles:{root:{marginRight:"4px",lineHeight:"16px"}}}),(0,v.jsx)("header",{children:t.name})]}),(0,v.jsx)("div",{children:(0,v.jsx)("summary",{children:(0,v.jsx)("span",{children:t.describe})})})]})})})})},Te={"::-webkit-scrollbar":{width:4},"::-webkit-scrollbar-thumb":{minHeight:"15px",border:"6px solid transparent",backgroundClip:"padding-box",backgroundColor:"rgb(200, 200, 200)"}},Ze={showModuleTree:(0,h.y0)({width:"320px",height:"100%",transition:"all 0.35s ease 0s",overflowX:"hidden",visibility:"visible"}),hideModuleTree:(0,h.y0)({width:"0px",height:"100%",transition:"width 0.35s ease 0s",overflowX:"hidden",visibility:"hidden"}),treeContainer:(0,h.y0)({width:"320px",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid rgb(234, 234, 234)",backgroundColor:"#fff"}),searchBoxStyle:(0,h.y0)({margin:"12px 16px",padding:"1px 0px",color:"rgb(1, 92, 218)",lineHeight:"32px",minHeight:"32px",flexGrow:"1"}),searchCallout:(0,h.y0)({".ms-Callout-main":(0,T.Z)({overflowY:"overlay",willChange:"transform"},Te)}),searchListStyle:(0,h.y0)({width:"287px",padding:"8px 0"}),summaryStyle:(0,h.y0)({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px",borderTop:"1px solid rgb(218, 218, 218)"}),moduleTreeStyle:(0,h.y0)({position:"relative",display:"flex",flexDirection:"column",overflowX:"hidden",overflowY:"auto",flexGrow:"1"}),moduleTreeBody:(0,h.y0)({position:"relative",height:"100%"}),listIconStyle:(0,h.y0)({display:"inline-flex",fontSize:"12px",lineHeight:"12px",marginRight:"4px",height:"6px",color:"rgb(55, 55, 55)",userSelect:"none"}),spinnerContainer:(0,h.y0)({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),moduleListStyle:(0,h.y0)((0,T.Z)({padding:0,margin:"0 auto",overflowY:"overlay",height:"100%",willChange:"transform"},Te)),moduleListItem:(0,h.y0)({listStyle:"none",outline:"none"}),itemFolderNode:(0,h.y0)({display:"flex",alignItems:"center",cursor:"pointer",padding:"7px 15px",border:"1px solid transparent",height:16,fontFamily:"Segoe UI,sans-serif",fontSize:12,lineHeight:16,fontWeight:600,color:"black","&:hover":{backgroundColor:"#eaeaea"}})},Oe=t.K.Item,ze=[{color:"rgba(0,120,212,1)",bg:"rgba(0,120,212,0.02)"},{color:"rgba(0,170,200,1)",bg:"rgba(0,170,200,0.02)"},{color:"rgba(0,200,153,1)",bg:"rgba(0,200,153,0.02)"},{color:"rgba(0,6,200,1)",bg:"rgba(0,6,200,0.02)"},{color:"rgba(212,65,0,1)",bg:"rgba(212,65,0,0.02)"},{color:"rgba(212,176,0,1)",bg:"rgba(212,176,0,0.02)"}],Be=function(){var e=(0,x.T)(),n=(0,x.C)(xe.RU),o=(0,i.useState)(new Set),s=(0,l.Z)(o,2),d=s[0],c=s[1],u=(0,i.useState)(new Map),p=(0,l.Z)(u,2),m=p[0],h=p[1],g=(0,i.useState)(0),y=(0,l.Z)(g,2),b=y[0],j=y[1],w=(0,i.useState)(!1),k=(0,l.Z)(w,2),L=k[0],I=k[1],D=(0,i.useState)(!1),T=(0,l.Z)(D,2),Z=T[0],O=T[1],z=(0,i.useState)(new Map),B=(0,l.Z)(z,2),H=B[0],E=B[1],R=function(e){var n=new Map,o=0;e.forEach((function(e){if("Release"===e.version){o+=1;var i={id:e.id,args:e.args?JSON.parse(e.args):{},name:e.name,version:e.version,describe:e.describe,imagesName:e.images.name,createdBy:e.created_by.username,lastChanged:e.changed_on,expand:JSON.parse(e.expand),color:ze[e.project.id%ze.length]};n.has(e.project.id)?n.get(e.project.id).children.push(i):n.set(e.project.id,{id:e.project.id,title:e.project.name,children:[i]})}})),j(o),h(n)},W=function(){I(!0),j(0),N.Z.job_template_modelview().then((function(e){if(0===(null===e||void 0===e?void 0:e.status)&&"success"===(null===e||void 0===e?void 0:e.message)){R(null===e||void 0===e?void 0:e.result.data);var n=Date.now();Ce.set("job_template",{update:n,value:null===e||void 0===e?void 0:e.result.data,expire:864e5})}})).catch((function(n){var o,i;n.response&&e((0,_.L$)({msg:null===(o=n.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message}))})).finally((function(){I(!1)}))};return(0,i.useEffect)((function(){var e=Ce.get("job_template");e&&Date.now()-(null===e||void 0===e?void 0:e.update)<(null===e||void 0===e?void 0:e.expire)?R(e.value):W()}),[]),(0,v.jsxs)(Oe,{shrink:!0,children:[(0,v.jsx)("div",{className:n?Ze.showModuleTree:Ze.hideModuleTree,children:(0,v.jsxs)("div",{className:Ze.treeContainer,children:[(0,v.jsxs)(t.K,{horizontal:!0,horizontalAlign:"space-between",children:[(0,v.jsx)(ye.R,{placeholder:"\u641c\u7d22\u6a21\u677f\u540d\u79f0\u6216\u63cf\u8ff0",role:"search",className:Ze.searchBoxStyle,onChange:f((function(e,n){if(n){console.log(n);var o=new Map;m.forEach((function(e,i){var t=e.children;t.length>0&&t.forEach((function(e){var t,l;((null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.indexOf(n))>-1||(null===e||void 0===e||null===(l=e.describe)||void 0===l?void 0:l.indexOf(n))>-1)&&(o.has(i)?o.set(i,o.get(i).concat(e)):o.set(i,[e]))}))})),E(o),O(!0)}else O(!1)}),300),onBlur:function(){setTimeout((function(){O(!1)}),300)}}),(0,v.jsx)(be.U,{className:Ze.searchCallout,isBeakVisible:!1,preventDismissOnLostFocus:!0,hidden:!Z,calloutMaxHeight:300,target:".ms-SearchBox",children:(0,v.jsxs)(t.K,{className:Ze.searchListStyle,children:[0===Array.from(H.keys()).length?(0,v.jsx)("div",{style:{textAlign:"center"},children:"\u6682\u65e0\u5339\u914d"}):"",Array.from(H.keys()).map((function(e){var n=H.get(e);return(0,v.jsx)(i.Fragment,{children:null===n||void 0===n?void 0:n.map((function(n){return(0,v.jsx)(De,{model:n,onClick:function(){console.log(d),d.has(e)||(d.add(e),c(new Set(d)))}},n.id)}))},e)}))]})})]}),(0,v.jsxs)("div",{className:Ze.summaryStyle,children:[(0,v.jsxs)(je.x,{children:[b," assets in total"]}),(0,v.jsx)(we.k,{children:(0,v.jsx)(r.h,{iconProps:{iconName:"Refresh"},onClick:function(){L||W()}})})]}),(0,v.jsx)("div",{className:Ze.moduleTreeStyle,children:(0,v.jsx)("div",{className:Ze.moduleTreeBody,children:L?(0,v.jsx)(t.K,{className:Ze.spinnerContainer,children:(0,v.jsx)(C.$,{size:S.E.large,label:"Loading"})}):(0,v.jsx)("ul",{className:Ze.moduleListStyle,children:Array.from(m.keys()).map((function(e){var n,o=m.get(e);return(0,v.jsxs)("li",{className:Ze.moduleListItem,children:[(0,v.jsx)("div",{role:"button",onClick:function(){d.has(e)?d.delete(e):d.add(e),c(new Set(d))},children:(0,v.jsxs)("div",{className:Ze.itemFolderNode,children:[(0,v.jsx)(a.J,{iconName:d.has(e)?"FlickUp":"FlickLeft",styles:{root:{alignItems:d.has(e)?"baseline":"center"}},className:Ze.listIconStyle}),o.title]})}),d.has(e)?(0,v.jsx)("ul",{role:"group",style:{paddingLeft:"0px"},children:null===(n=o.children)||void 0===n?void 0:n.map((function(e){return(0,v.jsx)("li",{className:Ze.moduleListItem,children:(0,v.jsx)("div",{role:"button",children:(0,v.jsx)(Le,{model:e})})},e.id)}))}):null]},e)}))})})})]})}),(0,v.jsx)(Ne,{})]})},He={root:{width:"100%",height:"100%",overflow:"hidden"}},Ee=function(){return(0,v.jsxs)(t.K,{className:"app-container",horizontal:!0,styles:He,children:[(0,v.jsx)(Be,{}),(0,v.jsx)(ve,{}),(0,v.jsx)(y,{})]})}}}]);